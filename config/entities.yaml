# Entity Configuration for Catacombs of Yarl
# This file defines all entities in the game including monsters, weapons, armor, and spells.
#
# Format:
#   - All entities support inheritance via 'extends' keyword
#   - Colors are RGB tuples [r, g, b] where values are 0-255
#   - Stats include hp, power, defense, xp, and optional damage/defense ranges
#   - Characters are single ASCII characters for rendering
#
# Inheritance System:
#   - Use 'extends: parent_name' to inherit all properties from parent entity
#   - Child entities can override any parent property by specifying it
#   - Nested objects (like 'stats') are deep-merged (child overrides specific fields)
#   - Multi-level inheritance supported (A extends B extends C)
#   - Circular dependencies are detected and prevented
#   - Examples: orc_chieftain extends orc, orc_veteran extends orc, etc.
#
# Monster AI Capabilities:
#   - can_seek_items: Enables item-seeking behavior (monsters pursue dropped loot)
#   - inventory_size: Maximum items monster can carry (requires can_seek_items: true)
#   - seek_distance: Maximum range for item detection and pursuit
#   - Item usage: Monsters with inventories can use scrolls (potions disabled for balance)
#   - Equipment: All monsters can spawn with and equip weapons/armor
#   - Failure mechanics: 50% scroll failure rate with interesting failure modes

version: "1.0"

# Player starting statistics
player:
  hp: 100
  power: 0       # No base magical power (reserved for enhancements)
  defense: 1
  xp: 0
  damage_min: 3  # Fist damage range: 3-4 (was 2+1-2)
  damage_max: 4  # Total unarmed attack: 0 power + 3-4 fist = 3-4

# Monster definitions
monsters:
  # Basic orc enemy
  orc:
    stats:
      hp: 20
      power: 0  # No base magical power (reserved for enhancements)
      defense: 0
      xp: 35
      damage_min: 4  # Natural attack range: 4-6 (was 3+1-3)
      damage_max: 6  # Total attack: 0 power + 4-6 natural = 4-6
    char: "o"
    color: [63, 127, 63]  # Dark green
    ai_type: "basic"
    render_order: "actor"
    blocks: true
    # Item-seeking behavior configuration
    can_seek_items: true      # Whether monster actively seeks items on the ground
    inventory_size: 5         # Maximum items monster can carry (0 = no inventory)
    seek_distance: 5          # Maximum distance to detect and pursue items

  # Elite orc variant using inheritance system
  orc_chieftain:
    extends: orc              # Inherit all orc properties
    stats:
      hp: 35                  # Override: more health than basic orc
      power: 2                # Override: leadership/training bonus (+2 to all attacks)
      xp: 75                  # Override: more XP reward for tougher enemy
    char: "O"                 # Override: capital letter to distinguish from basic orc
    color: [127, 63, 63]      # Override: reddish color (leadership/authority)
    inventory_size: 8         # Override: larger inventory (smarter, more organized)
    seek_distance: 7          # Override: better awareness and leadership
    # Inherits: damage_min: 4, damage_max: 6, defense: 0, ai_type: "basic", etc.
    # Total damage: 2 power + 4-6 natural = 6-8 (stronger than basic orc's 4-6)

  # Veteran orc variant - experienced fighter
  orc_veteran:
    extends: orc              # Inherit all orc properties
    stats:
      hp: 25                  # Override: slightly more health
      power: 1                # Override: some combat experience (+1 to all attacks)
      xp: 50                  # Override: moderate XP reward
    char: "v"                 # Override: different character
    color: [100, 150, 100]    # Override: slightly different green (experienced)
    inventory_size: 6         # Override: slightly larger inventory
    # Inherits: damage_min: 4, damage_max: 6, defense: 0, etc.
    # Total damage: 1 power + 4-6 natural = 5-7 (between basic orc and chieftain)

  # Weaker orc variant - scout/skirmisher
  orc_scout:
    extends: orc              # Inherit all orc properties
    stats:
      hp: 15                  # Override: less health (scout, not warrior)
      defense: 0              # Same as base orc
      xp: 25                  # Override: less XP (weaker enemy)
    char: "s"                 # Override: scout character
    color: [80, 100, 80]      # Override: darker green (stealthy)
    inventory_size: 3         # Override: smaller inventory (travels light)
    seek_distance: 8          # Override: better awareness (scout training)
    # Inherits: power: 0, damage_min: 4, damage_max: 6, ai_type: "basic", etc.
    # Total damage: 0 power + 4-6 natural = 4-6 (same as basic orc, but less HP)

  # Stronger troll enemy  
  troll:
    stats:
      hp: 30
      power: 0  # No base magical power (reserved for enhancements)
      defense: 2
      xp: 100
      damage_min: 8   # Natural attack range: 8-12 (was 6+2-6)
      damage_max: 12  # Total attack: 0 power + 8-12 natural = 8-12
    char: "T"
    color: [0, 127, 0]  # Green
    ai_type: "basic"
    render_order: "actor"
    blocks: true
    # Item-seeking behavior (trolls are smarter and seek further)
    can_seek_items: true      # Trolls actively seek items
    inventory_size: 8         # Larger inventory than orcs (smarter)
    seek_distance: 7          # Longer detection range than orcs

  # Elite troll variant - ancient and powerful
  troll_ancient:
    extends: troll            # Inherit all troll properties
    stats:
      hp: 50                  # Override: much more health (ancient wisdom)
      power: 3                # Override: magical/ancient power (+3 to all attacks)
      defense: 3              # Override: tougher hide/experience
      xp: 200                 # Override: massive XP reward
    char: "A"                 # Override: Ancient troll
    color: [0, 200, 0]        # Override: brighter green (ancient power)
    inventory_size: 12        # Override: even larger inventory (ancient hoard)
    seek_distance: 10         # Override: ancient senses
    # Inherits: damage_min: 8, damage_max: 12, ai_type: "basic", etc.
    # Total damage: 3 power + 8-12 natural = 11-15 (very powerful!)

  # Slime monsters - hostile to all factions
  slime:
    stats:
      hp: 15
      power: 0  # No magical power
      defense: 0
      xp: 25
      damage_min: 1  # Weak individual attacks: 1-3
      damage_max: 3  # But dangerous in groups and with corrosion
    char: "s"
    color: [0, 255, 0]  # Bright green
    ai_type: "slime"
    faction: "hostile_all"  # Attacks everyone including other monsters
    render_order: "actor"
    blocks: true
    # Slimes don't seek items - they're simple creatures
    can_seek_items: false
    inventory_size: 0
    special_abilities: ["corrosion"]  # Can corrode equipment on successful hits

  # Large slime - can split into smaller slimes when defeated
  large_slime:
    extends: slime            # Inherit all slime properties
    stats:
      hp: 40                  # Override: much more health
      power: 0                # Same as regular slime
      defense: 1              # Override: slightly tougher
      xp: 75                  # Override: more XP reward
      damage_min: 2           # Override: stronger attacks: 2-5
      damage_max: 5
    char: "S"                 # Override: capital S for Large Slime
    color: [0, 200, 0]        # Override: darker green (more mature)
    special_abilities: ["corrosion", "splitting"]  # Override: can split + corrode
    # Inherits: ai_type: "slime", faction: "hostile_all", can_seek_items: false, etc.

# Weapon definitions
weapons:
  # Starting weapon
  dagger:
    power_bonus: 0
    damage_min: 3  # Replaces fist damage: 0 power + 3-5 = 3-5
    damage_max: 5  # Slight improvement over fists (3-4)
    slot: "main_hand"
    char: "-"
    color: [139, 69, 19]  # Brown

  # Mid-tier weapon
  sword:
    power_bonus: 0
    damage_min: 4  # Better weapon: 0 power + 4-7 = 4-7
    damage_max: 7  # Significant improvement over dagger
    slot: "main_hand"
    char: "/"
    color: [192, 192, 192]  # Silver

# Armor definitions  
armor:
  # Basic shield
  shield:
    defense_bonus: 0
    defense_min: 1
    defense_max: 3
    slot: "off_hand"
    char: "["
    color: [139, 69, 19]  # Brown

# Spell and consumable definitions
spells:
  # Healing item
  healing_potion:
    spell_type: "heal"
    heal_amount: 40
    char: "!"
    color: [127, 0, 255]  # Purple

  # Damage spell with range
  lightning_scroll:
    spell_type: "damage"
    damage: 40
    maximum_range: 5
    char: "~"
    color: [255, 255, 0]  # Yellow

  # Area damage spell
  fireball_scroll:
    spell_type: "damage"
    damage: 25
    radius: 3
    char: "~"
    color: [255, 0, 0]  # Red

  # Confusion utility spell
  confusion_scroll:
    spell_type: "utility"
    char: "~"
    color: [207, 63, 255]  # Pink

  # Equipment enhancement scrolls
  enhance_weapon_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 127, 0]  # Orange

  enhance_armor_scroll:
    spell_type: "utility" 
    char: "~"
    color: [0, 255, 127]  # Cyan

  # Invisibility scroll - makes player invisible to most monsters
  invisibility_scroll:
    spell_type: "utility"
    char: "~"
    color: [200, 200, 255]  # Light blue
    duration: 10  # Turns of invisibility

  # Teleport scroll - teleport to target location (10% misfire chance)
  teleport_scroll:
    spell_type: "utility"
    char: "~"
    color: [128, 200, 255]  # Light cyan

  # Shield scroll - temporary defense boost (monsters have 10% backfire chance)
  shield_scroll:
    spell_type: "utility"
    char: "~"
    color: [100, 200, 255]  # Light blue
    duration: 10  # Turns of shield protection
    defense_bonus: 4  # +4 defense

  # Dragon Fart scroll - cone of noxious gas that puts enemies to sleep
  dragon_fart_scroll:
    spell_type: "offensive"
    char: "~"
    color: [150, 255, 100]  # Bright green
    duration: 20  # Turns enemies are knocked out
    range: 8  # Maximum cone distance
    cone_width: 45  # Cone width in degrees
