# Entity Configuration for Catacombs of Yarl
# This file defines all entities in the game including monsters, weapons, armor, and spells.
#
# Format:
#   - All entities support inheritance via 'extends' keyword
#   - Colors are RGB tuples [r, g, b] where values are 0-255
#   - Stats include hp, power, defense, xp, and optional damage/defense ranges
#   - Characters are single ASCII characters for rendering
#
# Inheritance System:
#   - Use 'extends: parent_name' to inherit all properties from parent entity
#   - Child entities can override any parent property by specifying it
#   - Nested objects (like 'stats') are deep-merged (child overrides specific fields)
#   - Multi-level inheritance supported (A extends B extends C)
#   - Circular dependencies are detected and prevented
#   - Examples: orc_chieftain extends orc, orc_veteran extends orc, etc.
#
# Monster AI Capabilities:
#   - can_seek_items: Enables item-seeking behavior (monsters pursue dropped loot)
#   - inventory_size: Maximum items monster can carry (requires can_seek_items: true)
#   - seek_distance: Maximum range for item detection and pursuit
#   - Item usage: Monsters with inventories can use scrolls (potions disabled for balance)
#   - Equipment: All monsters can spawn with and equip weapons/armor
#   - Failure mechanics: 50% scroll failure rate with interesting failure modes

version: "1.0"

# Player starting statistics
player:
  hp: 60  # Base HP (modified by CON: 60 + 2 = 62 total)
  power: 0       # No base magical power (reserved for enhancements)
  defense: 1
  xp: 0
  damage_min: 1  # Fist damage range: 1d2 (very weak unarmed)
  damage_max: 2  # Total unarmed: 1-2 + STR modifier
  # D&D-style stats (standard fighter build)
  strength: 14      # Good melee (+2 damage modifier)
  dexterity: 12     # Decent (+1 to-hit, +1 AC)
  constitution: 14  # Survivable (+2 HP modifier = +2 max HP)

# Monster definitions
monsters:
  # Basic orc enemy
  orc:
    stats:
      hp: 20
      power: 0  # No base magical power (reserved for enhancements)
      defense: 0
      xp: 35
      damage_min: 4  # Natural attack range: 4-6 (was 3+1-3)
      damage_max: 6  # Total attack: 0 power + 4-6 natural = 4-6
      # D&D-style stats
      strength: 14      # Strong (+2 damage modifier)
      dexterity: 10     # Average (0 to-hit, 0 AC)
      constitution: 12  # Tough (+1 HP modifier)
    char: "o"
    color: [63, 127, 63]  # Dark green
    ai_type: "basic"
    render_order: "actor"
    blocks: true
    # Item-seeking behavior configuration
    can_seek_items: true      # Whether monster actively seeks items on the ground
    inventory_size: 5         # Maximum items monster can carry (0 = no inventory)
    seek_distance: 5          # Maximum distance to detect and pursue items
    # Equipment system - orcs spawn with basic weapons/armor
    equipment:
      spawn_chances:
        main_hand: 0.75  # 75% chance of weapon
        chest: 0.50      # 50% chance of armor
      equipment_pool:
        main_hand:
          - item: "club"
            weight: 40
          - item: "dagger"
            weight: 30
          - item: "shortsword"
            weight: 30
        chest:
          - item: "leather_armor"
            weight: 100

  # Elite orc variant using inheritance system
  orc_chieftain:
    extends: orc              # Inherit all orc properties
    stats:
      hp: 35                  # Override: more health than basic orc
      power: 2                # Override: leadership/training bonus (+2 to all attacks)
      xp: 75                  # Override: more XP reward for tougher enemy
    char: "O"                 # Override: capital letter to distinguish from basic orc
    color: [127, 63, 63]      # Override: reddish color (leadership/authority)
    inventory_size: 8         # Override: larger inventory (smarter, more organized)
    seek_distance: 7          # Override: better awareness and leadership
    # Inherits: damage_min: 4, damage_max: 6, defense: 0, ai_type: "basic", etc.
    # Total damage: 2 power + 4-6 natural = 6-8 (stronger than basic orc's 4-6)

  # Veteran orc variant - experienced fighter
  orc_veteran:
    extends: orc              # Inherit all orc properties
    stats:
      hp: 25                  # Override: slightly more health
      power: 1                # Override: some combat experience (+1 to all attacks)
      xp: 50                  # Override: moderate XP reward
    char: "v"                 # Override: different character
    color: [100, 150, 100]    # Override: slightly different green (experienced)
    inventory_size: 6         # Override: slightly larger inventory
    # Inherits: damage_min: 4, damage_max: 6, defense: 0, etc.
    # Total damage: 1 power + 4-6 natural = 5-7 (between basic orc and chieftain)

  # Weaker orc variant - scout/skirmisher
  orc_scout:
    extends: orc              # Inherit all orc properties
    stats:
      hp: 15                  # Override: less health (scout, not warrior)
      defense: 0              # Same as base orc
      xp: 25                  # Override: less XP (weaker enemy)
    char: "s"                 # Override: scout character
    color: [80, 100, 80]      # Override: darker green (stealthy)
    inventory_size: 3         # Override: smaller inventory (travels light)
    seek_distance: 8          # Override: better awareness (scout training)
    # Inherits: power: 0, damage_min: 4, damage_max: 6, ai_type: "basic", etc.
    # Total damage: 0 power + 4-6 natural = 4-6 (same as basic orc, but less HP)

  # Stronger troll enemy  
  troll:
    stats:
      hp: 30
      power: 0  # No base magical power (reserved for enhancements)
      defense: 2
      xp: 100
      damage_min: 8   # Natural attack range: 8-12 (was 6+2-6)
      damage_max: 12  # Total attack: 0 power + 8-12 natural = 8-12
      # D&D-style stats
      strength: 16      # Very strong (+3 damage modifier)
      dexterity: 8      # Clumsy (-1 to-hit, -1 AC)
      constitution: 16  # Very tough (+3 HP modifier)
    char: "T"
    color: [0, 127, 0]  # Green
    ai_type: "basic"
    render_order: "actor"
    blocks: true
    # Item-seeking behavior (trolls are smarter and seek further)
    can_seek_items: true      # Trolls actively seek items
    inventory_size: 8         # Larger inventory than orcs (smarter)
    seek_distance: 7          # Longer detection range than orcs

  # Elite troll variant - ancient and powerful
  troll_ancient:
    extends: troll            # Inherit all troll properties
    stats:
      hp: 50                  # Override: much more health (ancient wisdom)
      power: 3                # Override: magical/ancient power (+3 to all attacks)
      defense: 3              # Override: tougher hide/experience
      xp: 200                 # Override: massive XP reward
    char: "A"                 # Override: Ancient troll
    color: [0, 200, 0]        # Override: brighter green (ancient power)
    inventory_size: 12        # Override: even larger inventory (ancient hoard)
    seek_distance: 10         # Override: ancient senses
    # Inherits: damage_min: 8, damage_max: 12, ai_type: "basic", etc.
    # Total damage: 3 power + 8-12 natural = 11-15 (very powerful!)

  # Slime monsters - hostile to all factions
  slime:
    stats:
      hp: 15
      power: 0  # No magical power
      defense: 0
      xp: 25
      damage_min: 1  # Weak individual attacks: 1-3
      damage_max: 3  # But dangerous in groups and with corrosion
      # D&D-style stats
      strength: 8       # Weak (-1 damage modifier)
      dexterity: 6      # Very slow (-2 to-hit, -2 AC)
      constitution: 10  # Average
    char: "s"
    color: [0, 255, 0]  # Bright green
    ai_type: "slime"
    faction: "hostile_all"  # Attacks everyone including other monsters
    render_order: "actor"
    blocks: true
    # Slimes don't seek items - they're simple creatures
    can_seek_items: false
    inventory_size: 0
    special_abilities: ["corrosion"]  # Can corrode equipment on successful hits

  # Large slime - can split into smaller slimes when defeated
  large_slime:
    extends: slime            # Inherit all slime properties
    stats:
      hp: 40                  # Override: much more health
      power: 0                # Same as regular slime
      defense: 1              # Override: slightly tougher
      xp: 75                  # Override: more XP reward
      damage_min: 2           # Override: stronger attacks: 2-5
      damage_max: 5
      # D&D-style stats
      strength: 12            # Override: stronger (+1 damage modifier)
      dexterity: 6            # Same as regular slime (-2 to-hit, -2 AC)
      constitution: 14        # Override: tougher (+2 HP modifier)
    char: "S"                 # Override: capital S for Large Slime
    color: [0, 200, 0]        # Override: darker green (more mature)
    special_abilities: ["corrosion", "splitting"]  # Override: can split + corrode
    # Inherits: ai_type: "slime", faction: "hostile_all", can_seek_items: false, etc.

  # ═══════════════════════════════════════════════════════════
  # BOSS MONSTERS - Unique powerful encounters
  # ═══════════════════════════════════════════════════════════

  # Dragon Lord - Ancient fire dragon, master of flames
  dragon_lord:
    stats:
      hp: 100                  # Boss-tier health
      power: 5                 # Magical power for breath attacks
      defense: 5               # Heavily armored scales
      xp: 500                  # Massive XP reward
      damage_min: 10           # Devastating melee: 10-15 + STR modifier
      damage_max: 15
      # D&D-style stats - Legendary dragon
      strength: 20             # Crushing strength (+5 damage modifier)
      dexterity: 14            # Surprisingly agile (+2 to-hit, +2 AC)
      constitution: 18         # Ancient endurance (+4 HP modifier)
      # Resistances: Dragons are immune to their element
      resistances:
        fire: 100              # Immune to fire damage (fire-breathing dragon)
        cold: 50               # Resistant to cold (thick scales)
        poison: 30             # Partial poison resistance (ancient creature)
    char: "D"                  # Capital D for Dragon
    color: [255, 50, 0]        # Burning red
    ai_type: "boss"            # Boss AI for enhanced combat behavior
    render_order: "actor"
    blocks: true
    is_boss: true              # Flag for boss-specific behavior
    boss_name: "Dragon Lord"   # Display name for messages
    # Bosses don't seek items - they're above such things
    can_seek_items: false
    inventory_size: 0
    # Special abilities handled by boss ability system (Slice 7)
    special_abilities: ["fire_breath", "wing_buffet", "summon_minions"]
    # No equipment spawning - bosses have natural power
    equipment: null

  # Demon King - Cursed monarch of the underworld
  demon_king:
    stats:
      hp: 80                   # Boss-tier health (less tanky, more tactical)
      power: 8                 # High magical power for curses
      defense: 3               # Moderate defense (relies on magic)
      xp: 500                  # Massive XP reward
      damage_min: 8            # Strong melee: 8-12 + STR modifier
      damage_max: 12
      # D&D-style stats - Demon lord
      strength: 16             # Strong (+3 damage modifier)
      dexterity: 16            # Agile (+3 to-hit, +3 AC)
      constitution: 16         # Demonic vitality (+3 HP modifier)
      # Resistances: Demons are creatures of fire and darkness
      resistances:
        fire: 75               # Highly resistant to fire (creature of hell)
        poison: 100            # Immune to poison (demonic nature)
        lightning: 50          # Resistant to lightning (magical nature)
    char: "K"                  # Capital K for King
    color: [160, 32, 240]      # Dark purple
    ai_type: "boss"            # Boss AI for enhanced combat behavior
    render_order: "actor"
    blocks: true
    is_boss: true              # Flag for boss-specific behavior
    boss_name: "Demon King"    # Display name for messages
    # Bosses don't seek items - they command minions for that
    can_seek_items: false
    inventory_size: 0
    # Special abilities handled by boss ability system (Slice 7)
    special_abilities: ["curse", "life_drain", "teleport"]
    # No equipment spawning - demonic power is innate
    equipment: null

# Weapon definitions
#
# Weapon Properties (D&D-style):
# - damage_dice: Dice notation for damage (e.g., "1d4", "1d6", "1d8")
# - to_hit_bonus: Bonus to attack rolls (finesse weapons get +1)
# - Damage is: dice roll + STR modifier + to_hit_bonus
#
# Weapon Categories:
# - Light weapons (1d4): Fast, finesse-based
# - One-handed (1d6-1d8): Balanced weapons
# - Heavy (1d10-1d12): Slow but powerful
#
weapons:
  # ═══════════════════════════════════════════════════════════
  # LIGHT WEAPONS (1d4) - Fast, Finesse
  # ═══════════════════════════════════════════════════════════
  
  # Starting weapon - weak but fast
  dagger:
    damage_dice: "1d4"      # 1-4 damage (avg 2.5)
    to_hit_bonus: 1         # Finesse weapon: easier to hit
    slot: "main_hand"
    char: "-"
    color: [139, 69, 19]    # Brown

  # ═══════════════════════════════════════════════════════════
  # ONE-HANDED WEAPONS (1d6) - Balanced
  # ═══════════════════════════════════════════════════════════
  
  # Common bludgeoning weapon
  club:
    damage_dice: "1d6"      # 1-6 damage (avg 3.5)
    to_hit_bonus: 0
    slot: "main_hand"
    char: ")"
    color: [101, 67, 33]    # Dark brown
  
  # Piercing finesse weapon
  shortsword:
    damage_dice: "1d6"      # 1-6 damage (avg 3.5)
    to_hit_bonus: 1         # Finesse: better to-hit
    slot: "main_hand"
    char: "/"
    color: [192, 192, 192]  # Silver
  
  # Bludgeoning weapon, good vs armor
  mace:
    damage_dice: "1d6"      # 1-6 damage (avg 3.5)
    to_hit_bonus: 0
    slot: "main_hand"
    char: ")"
    color: [128, 128, 128]  # Gray

  # ═══════════════════════════════════════════════════════════
  # ONE-HANDED WEAPONS (1d8) - Better Damage
  # ═══════════════════════════════════════════════════════════
  
  # Standard sword - well-balanced
  longsword:
    damage_dice: "1d8"      # 1-8 damage (avg 4.5)
    to_hit_bonus: 0
    slot: "main_hand"
    char: "/"
    color: [192, 192, 192]  # Silver
  
  # Elegant finesse weapon
  rapier:
    damage_dice: "1d8"      # 1-8 damage (avg 4.5)
    to_hit_bonus: 1         # Finesse: precision strikes
    slot: "main_hand"
    char: "/"
    color: [220, 220, 220]  # Bright silver
  
  # Versatile piercing weapon
  spear:
    damage_dice: "1d8"      # 1-8 damage (avg 4.5)
    to_hit_bonus: 0
    reach: 2                # Can attack from 2 tiles away!
    slot: "main_hand"
    char: "/"
    color: [160, 82, 45]    # Brown/wood

  # ═══════════════════════════════════════════════════════════
  # HEAVY WEAPONS (1d10) - High Damage, No Finesse
  # ═══════════════════════════════════════════════════════════
  
  # Heavy chopping weapon
  battleaxe:
    damage_dice: "1d10"     # 1-10 damage (avg 5.5)
    to_hit_bonus: 0
    slot: "main_hand"
    char: "/"
    color: [169, 169, 169]  # Dark gray
  
  # Heavy bludgeoning weapon
  warhammer:
    damage_dice: "1d10"     # 1-10 damage (avg 5.5)
    to_hit_bonus: 0
    slot: "main_hand"
    char: ")"
    color: [105, 105, 105]  # Dim gray

  # ═══════════════════════════════════════════════════════════
  # TWO-HANDED WEAPONS (1d12) - Maximum Damage
  # ═══════════════════════════════════════════════════════════
  
  # Massive two-handed axe
  greataxe:
    damage_dice: "1d12"     # 1-12 damage (avg 6.5) - HIGHEST!
    to_hit_bonus: -1        # Unwieldy: harder to hit
    two_handed: true        # Requires both hands, prevents shield use
    slot: "main_hand"
    char: "/"
    color: [110, 110, 110]  # Dark gray
  
  # Large two-handed sword
  greatsword:
    damage_dice: "2d6"      # 2-12 damage (avg 7.0) - MOST CONSISTENT!
    to_hit_bonus: 0
    two_handed: true        # Requires both hands, prevents shield use
    slot: "main_hand"
    char: "/"
    color: [140, 140, 160]  # Steel gray (darker)
  
  # Legacy weapon (for backward compatibility)
  sword:
    damage_dice: "1d8"      # Same as longsword
    to_hit_bonus: 0
    slot: "main_hand"
    char: "/"
    color: [150, 150, 170]  # Silver (darker)

  # ═══════════════════════════════════════════════════════════
  # RANGED WEAPONS - Bows & Crossbows
  # ═══════════════════════════════════════════════════════════
  
  # Light ranged weapon
  shortbow:
    damage_dice: "1d6"      # 1-6 damage (avg 3.5)
    to_hit_bonus: 0
    reach: 8                # Can attack up to 8 tiles away!
    two_handed: true        # Requires both hands
    slot: "main_hand"
    char: "}"
    color: [139, 69, 19]    # Brown wood
  
  # Powerful ranged weapon
  longbow:
    damage_dice: "1d8"      # 1-8 damage (avg 4.5)
    to_hit_bonus: 0
    reach: 10               # Longest range! 10 tiles!
    two_handed: true        # Requires both hands
    slot: "main_hand"
    char: "}"
    color: [160, 82, 45]    # Sienna brown
  
  # Mechanical ranged weapon
  crossbow:
    damage_dice: "1d8"      # 1-8 damage (avg 4.5)
    to_hit_bonus: 0
    reach: 8                # Medium range
    two_handed: true        # Requires both hands
    slot: "main_hand"
    char: "}"
    color: [105, 105, 105]  # Dim gray (metal + wood)

# Armor definitions
#
# Armor Types & DEX Caps:
# - Light Armor: +2-3 AC, no DEX cap (full DEX bonus applies)
# - Medium Armor: +4-5 AC, DEX cap +2 (max +2 DEX bonus to AC)
# - Heavy Armor: +6-8 AC, DEX cap 0 (no DEX bonus to AC)
#
# This creates meaningful trade-offs: high DEX characters prefer light armor,
# while low DEX characters benefit from heavy armor protection.
armor:
  # ═══════════════════════════════════════════════════════════
  # SHIELDS (Off-Hand Slot)
  # ═══════════════════════════════════════════════════════════
  shield:
    defense_bonus: 0
    defense_min: 1
    defense_max: 3
    armor_class_bonus: 2  # +2 AC for shields
    armor_type: "shield"  # Shields don't affect DEX cap
    slot: "off_hand"
    char: "["
    color: [139, 69, 19]  # Brown

  # ═══════════════════════════════════════════════════════════
  # LIGHT ARMOR (No DEX Cap)
  # ═══════════════════════════════════════════════════════════
  
  # HEAD SLOT - Light
  leather_helmet:
    armor_class_bonus: 1  # +1 AC
    armor_type: "light"
    slot: "head"
    char: "^"
    color: [160, 82, 45]  # Sienna brown

  # CHEST SLOT - Light
  leather_armor:
    armor_class_bonus: 2  # +2 AC
    armor_type: "light"
    slot: "chest"
    char: "["
    color: [139, 69, 19]  # Saddle brown
  
  studded_leather_armor:
    armor_class_bonus: 3  # +3 AC (better light armor)
    armor_type: "light"
    slot: "chest"
    char: "["
    color: [101, 67, 33]  # Dark brown with studs

  # FEET SLOT - Light
  leather_boots:
    armor_class_bonus: 1  # +1 AC
    armor_type: "light"
    slot: "feet"
    char: "]"
    color: [101, 67, 33]  # Dark brown

  # ═══════════════════════════════════════════════════════════
  # MEDIUM ARMOR (DEX Cap +2)
  # ═══════════════════════════════════════════════════════════
  
  # HEAD SLOT - Medium
  chain_coif:
    armor_class_bonus: 2  # +2 AC
    armor_type: "medium"
    dex_cap: 2  # Max +2 DEX bonus
    slot: "head"
    char: "^"
    color: [140, 140, 150]  # Steel (darker)

  # CHEST SLOT - Medium
  chain_mail:
    armor_class_bonus: 4  # +4 AC
    armor_type: "medium"
    dex_cap: 2  # Max +2 DEX bonus
    slot: "chest"
    char: "["
    color: [169, 169, 169]  # Dark gray
  
  scale_mail:
    armor_class_bonus: 5  # +5 AC (better medium armor)
    armor_type: "medium"
    dex_cap: 2  # Max +2 DEX bonus
    slot: "chest"
    char: "["
    color: [128, 128, 128]  # Gray
  
  # Special: Dragon Scale Mail (medium armor with fire resistance)
  dragon_scale_mail:
    armor_class_bonus: 5  # +5 AC (same as scale mail)
    armor_type: "medium"
    dex_cap: 2  # Max +2 DEX bonus
    resistances:
      fire: 30  # +30% fire resistance
    slot: "chest"
    char: "["
    color: [220, 20, 60]  # Crimson (dragon scales)
  
  # Special: Frost Mail (medium armor with cold resistance)
  frost_mail:
    armor_class_bonus: 5  # +5 AC (same as scale mail)
    armor_type: "medium"
    dex_cap: 2  # Max +2 DEX bonus
    resistances:
      cold: 30  # +30% cold resistance
    slot: "chest"
    char: "["
    color: [135, 206, 250]  # Light sky blue (icy)

  # FEET SLOT - Medium
  chain_boots:
    armor_class_bonus: 2  # +2 AC
    armor_type: "medium"
    dex_cap: 2  # Max +2 DEX bonus
    slot: "feet"
    char: "]"
    color: [140, 140, 150]  # Steel (darker)

  # ═══════════════════════════════════════════════════════════
  # HEAVY ARMOR (DEX Cap 0 - No DEX Bonus!)
  # ═══════════════════════════════════════════════════════════
  
  # HEAD SLOT - Heavy
  plate_helmet:
    armor_class_bonus: 3  # +3 AC
    armor_type: "heavy"
    dex_cap: 0  # No DEX bonus to AC
    slot: "head"
    char: "^"
    color: [160, 160, 180]  # Polished steel (darker)

  # CHEST SLOT - Heavy
  plate_mail:
    armor_class_bonus: 6  # +6 AC
    armor_type: "heavy"
    dex_cap: 0  # No DEX bonus to AC
    slot: "chest"
    char: "["
    color: [155, 155, 175]  # Steel (darker)
  
  full_plate:
    armor_class_bonus: 8  # +8 AC (best armor in game!)
    armor_type: "heavy"
    dex_cap: 0  # No DEX bonus to AC
    slot: "chest"
    char: "["
    color: [170, 170, 190]  # Shining steel (darker)

  # FEET SLOT - Heavy
  plate_boots:
    armor_class_bonus: 2  # +2 AC
    armor_type: "heavy"
    dex_cap: 0  # No DEX bonus to AC
    slot: "feet"
    char: "]"
    color: [155, 155, 175]  # Steel
  
  # ═══════════════════════════════════════════════════════════
  # SPECIAL ARMOR WITH RESISTANCES
  # ═══════════════════════════════════════════════════════════
  
  # Helmet of Fire Resistance
  helmet_of_fire_resistance:
    armor_class_bonus: 2  # +2 AC
    armor_type: "medium"
    dex_cap: 2
    resistances:
      fire: 20  # +20% fire resistance
    slot: "head"
    char: "^"
    color: [255, 69, 0]  # Orange-red (fire)
  
  # Helmet of Frost
  helmet_of_frost:
    armor_class_bonus: 2  # +2 AC
    armor_type: "medium"
    dex_cap: 2
    resistances:
      cold: 20  # +20% cold resistance
    slot: "head"
    char: "^"
    color: [176, 224, 230]  # Powder blue (frost)
  
  # Boots of Acid Resistance
  acid_resistant_boots:
    armor_class_bonus: 1  # +1 AC
    armor_type: "light"
    resistances:
      acid: 25  # +25% acid resistance
    slot: "feet"
    char: "]"
    color: [154, 205, 50]  # Yellow-green (acid)
  
  # Shield of Resistance (uncommon)
  shield_of_resistance:
    armor_class_bonus: 3  # +3 AC (better than normal shield)
    armor_type: "shield"
    resistances:
      fire: 15
      cold: 15
      poison: 15
      lightning: 15
      acid: 15  # +15% to all resistances
    slot: "off_hand"
    char: "["
    color: [147, 112, 219]  # Medium purple (magical)

# Spell and consumable definitions
spells:
  # Healing item
  healing_potion:
    spell_type: "heal"
    heal_amount: 40
    char: "!"
    color: [127, 0, 255]  # Purple

  # === NEW POTIONS - Buff Potions ===
  
  speed_potion:
    spell_type: "potion"
    char: "!"
    color: [255, 200, 0]  # Golden yellow
    effect_function: "drink_speed_potion"
  
  regeneration_potion:
    spell_type: "potion"
    char: "!"
    color: [0, 255, 100]  # Bright green
    effect_function: "drink_regeneration_potion"
  
  invisibility_potion:
    spell_type: "potion"
    char: "!"
    color: [150, 150, 255]  # Light blue
    effect_function: "drink_invisibility_potion"
  
  levitation_potion:
    spell_type: "potion"
    char: "!"
    color: [200, 220, 255]  # Sky blue
    effect_function: "drink_levitation_potion"
  
  protection_potion:
    spell_type: "potion"
    char: "!"
    color: [100, 150, 255]  # Blue
    effect_function: "drink_protection_potion"
  
  heroism_potion:
    spell_type: "potion"
    char: "!"
    color: [255, 215, 0]  # Gold
    effect_function: "drink_heroism_potion"
  
  # === NEW POTIONS - Debuff Potions ===
  
  weakness_potion:
    spell_type: "potion"
    char: "!"
    color: [100, 100, 100]  # Dark gray
    effect_function: "drink_weakness_potion"
  
  slowness_potion:
    spell_type: "potion"
    char: "!"
    color: [139, 90, 43]  # Brown
    effect_function: "drink_slowness_potion"
  
  blindness_potion:
    spell_type: "potion"
    char: "!"
    color: [50, 50, 50]  # Very dark gray
    effect_function: "drink_blindness_potion"
  
  paralysis_potion:
    spell_type: "potion"
    char: "!"
    color: [80, 80, 120]  # Dark blue-gray
    effect_function: "drink_paralysis_potion"
  
  # === NEW POTIONS - Special ===
  
  experience_potion:
    spell_type: "potion"
    char: "!"
    color: [255, 100, 255]  # Bright magenta
    effect_function: "drink_experience_potion"

  # Damage spell with range
  lightning_scroll:
    spell_type: "damage"
    damage: 40
    maximum_range: 5
    char: "~"
    color: [255, 255, 0]  # Yellow

  # Area damage spell
  fireball_scroll:
    spell_type: "damage"
    damage: 25
    radius: 3
    char: "~"
    color: [255, 0, 0]  # Red

  # Confusion utility spell
  confusion_scroll:
    spell_type: "utility"
    char: "~"
    color: [207, 63, 255]  # Pink

  # Equipment enhancement scrolls
  enhance_weapon_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 127, 0]  # Orange

  enhance_armor_scroll:
    spell_type: "utility" 
    char: "~"
    color: [0, 255, 127]  # Cyan

  # Invisibility scroll - makes player invisible to most monsters
  invisibility_scroll:
    spell_type: "utility"
    char: "~"
    color: [100, 120, 200]  # Medium blue (darker)
    duration: 30  # Turns of invisibility

  # Teleport scroll - teleport to target location (10% misfire chance)
  teleport_scroll:
    spell_type: "utility"
    char: "~"
    color: [80, 160, 200]  # Cyan (darker)

  # Shield scroll - temporary defense boost (monsters have 10% backfire chance)
  shield_scroll:
    spell_type: "utility"
    char: "~"
    color: [60, 140, 200]  # Blue (darker)
    duration: 10  # Turns of shield protection
    defense_bonus: 4  # +4 defense

  # Dragon Fart scroll - cone of noxious gas that puts enemies to sleep
  dragon_fart_scroll:
    spell_type: "offensive"
    char: "~"
    color: [150, 255, 120]  # Bright lime green - more visible
    duration: 20  # Turns enemies are knocked out
    range: 8  # Maximum cone distance
    cone_width: 45  # Cone width in degrees

  # Raise Dead scroll - resurrect corpse as mindless zombie (attacks everything!)
  raise_dead_scroll:
    spell_type: "utility"
    char: "~"
    color: [100, 255, 100]  # Necromantic green
    range: 5  # Maximum distance to corpse

  # Yo Mama scroll - target yells insult, ALL hostiles attack them!
  yo_mama_scroll:
    spell_type: "utility"
    char: "~"
    color: [160, 100, 220]  # Purple (darker)
    duration: 1000  # Effectively permanent
    range: 10  # Can target from distance

  # Slow scroll - target moves every 2nd turn
  slow_scroll:
    spell_type: "utility"
    char: "~"
    color: [100, 100, 200]  # Blue (darker)
    duration: 10  # Turns of slow
    range: 8  # Targeting range

  # Glue scroll - target cannot move (but can attack)
  glue_scroll:
    spell_type: "utility"
    char: "~"
    color: [139, 69, 19]  # Brown glue
    duration: 5  # Turns stuck
    range: 8  # Targeting range

  # Rage scroll - target attacks ANYONE with 2x dmg, 0.5x accuracy
  rage_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 50, 50]  # Bright red
    duration: 8  # Turns enraged
    range: 8  # Targeting range

  # NEW SCROLLS (v3.11.0+)
  
  # Haste scroll - grants increased movement speed
  haste_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 200, 0]  # Golden yellow
    duration: 30  # Turns of haste
  
  # Blink scroll - short-range tactical teleport
  blink_scroll:
    spell_type: "utility"
    char: "~"
    color: [150, 150, 255]  # Light blue
    maximum_range: 5  # Max blink distance
  
  # Light scroll - reveals all tiles in FOV
  light_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 255, 200]  # Bright yellow-white
  
  # Magic Mapping scroll - reveals entire dungeon level
  magic_mapping_scroll:
    spell_type: "utility"
    char: "~"
    color: [200, 200, 255]  # Light purple
  
  # Earthquake scroll - AOE damage to all creatures
  earthquake_scroll:
    spell_type: "damage"
    char: "~"
    color: [139, 69, 19]  # Brown
    damage: 20  # Base damage (3d6 in spell def)
    radius: 3  # AOE radius
  
  # Identify scroll - auto-identifies 1 random item per turn
  identify_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 215, 0]  # Gold
    duration: 5  # Turns of identify mode (identifies 5 random items)
  
  # Fear scroll - causes enemies to flee in terror
  fear_scroll:
    spell_type: "utility"
    char: "~"
    color: [139, 69, 19]  # Brown (terror)
    duration: 15  # How long enemies flee
    radius: 10  # Large AOE around caster
  
  # Detect Monster scroll - reveals all monster locations
  detect_monster_scroll:
    spell_type: "utility"
    char: "~"
    color: [255, 0, 255]  # Magenta (psychic sense)
    duration: 20  # Turns of monster detection
  
  # ════════════════════════════════════════════════════════
  # KEYS - Unlock vault doors and special chests
  # ════════════════════════════════════════════════════════
  # Keys are consumable items that unlock themed vaults.
  # Each key type corresponds to specific vault themes.
  # Keys are consumed when used to unlock doors/chests.
  
  bronze_key:
    spell_type: "key"
    char: "k"
    color: [205, 127, 50]  # Bronze
    key_type: "bronze"
  
  silver_key:
    spell_type: "key"
    char: "k"
    color: [192, 192, 192]  # Silver
    key_type: "silver"
  
  gold_key:
    spell_type: "key"
    char: "k"
    color: [255, 215, 0]  # Gold
    key_type: "gold"
  
  dragon_scale:
    spell_type: "key"
    char: "k"
    color: [220, 20, 60]  # Crimson
    key_type: "dragon_scale"

# ═══════════════════════════════════════════════════════════
# WANDS - Multi-charge reusable magic items
# ═══════════════════════════════════════════════════════════
# Wands work like scrolls but have charges. They can be recharged
# by picking up matching scrolls. Wands spawn with random charges:
# - Level 1: 2-4 charges
# - Higher levels: 2-4 + (level-1) charges, max 10 starting charges
#
# Note: Wands have INFINITE max capacity (no charge limit)
wands:
  # Damage wands
  wand_of_fireball:
    spell_type: "damage"
    spell_name: "fireball_scroll"  # Matches scroll for recharging
    damage: 25
    radius: 3
    char: "/"
    color: [255, 100, 0]  # Bright orange (wand)
  
  wand_of_lightning:
    spell_type: "damage"
    spell_name: "lightning_scroll"
    damage: 40
    maximum_range: 5
    char: "/"
    color: [255, 255, 100]  # Bright yellow (wand)
  
  # Utility wands
  wand_of_confusion:
    spell_type: "utility"
    spell_name: "confusion_scroll"
    char: "/"
    color: [207, 100, 255]  # Bright pink (wand)
  
  wand_of_teleportation:
    spell_type: "utility"
    spell_name: "teleport_scroll"
    char: "/"
    color: [150, 220, 255]  # Bright cyan (wand)
  
  wand_of_dragon_farts:
    spell_type: "offensive"
    spell_name: "dragon_fart_scroll"
    char: "/"
    color: [150, 255, 120]  # Bright lime green - more visible
    duration: 20
    range: 8
    cone_width: 45
  
  wand_of_yo_mama:
    spell_type: "utility"
    spell_name: "yo_mama_scroll"
    char: "/"
    color: [180, 120, 220]  # Purple (darker)
    duration: 1000
    range: 10
  
  wand_of_slow:
    spell_type: "utility"
    spell_name: "slow_scroll"
    char: "/"
    color: [120, 120, 200]  # Blue (darker)
    duration: 10
    range: 8
  
  wand_of_glue:
    spell_type: "utility"
    spell_name: "glue_scroll"
    char: "/"
    color: [180, 100, 50]  # Bright brown (wand)
    duration: 5
    range: 8
  
  wand_of_rage:
    spell_type: "utility"
    spell_name: "rage_scroll"
    char: "/"
    color: [255, 100, 100]  # Bright red (wand)
    duration: 8
    range: 8

# ═══════════════════════════════════════════════════════════
# RINGS - Passive effect jewelry
# ═══════════════════════════════════════════════════════════
# Rings provide continuous bonuses while equipped in left or right ring slots.
# All rings start unidentified and must be identified to reveal their effects.
# Players can wear 2 rings simultaneously.

rings:
  # ──────────────────────────────────────────────────────────
  # DEFENSIVE RINGS - Protection and survival
  # ──────────────────────────────────────────────────────────
  
  ring_of_protection:
    char: "="
    color: [180, 180, 180]  # Silver
    ring_effect: "protection"
    effect_strength: 2  # +2 AC
  
  ring_of_regeneration:
    char: "="
    color: [100, 255, 100]  # Bright green
    ring_effect: "regeneration"
    effect_strength: 5  # Heal 1 HP every 5 turns
  
  ring_of_resistance:
    char: "="
    color: [200, 150, 255]  # Purple
    ring_effect: "resistance"
    effect_strength: 10  # +10% all resistances
    # Note: Ring component provides resistance bonuses, but we also add to equippable
    # so it works via equipment aggregation
    resistances:
      fire: 10
      cold: 10
      poison: 10
      lightning: 10
      acid: 10
  
  # ──────────────────────────────────────────────────────────
  # OFFENSIVE RINGS - Combat bonuses
  # ──────────────────────────────────────────────────────────
  
  ring_of_strength:
    char: "="
    color: [255, 100, 100]  # Red
    ring_effect: "strength"
    effect_strength: 2  # +2 STR
  
  ring_of_dexterity:
    char: "="
    color: [100, 200, 255]  # Light blue
    ring_effect: "dexterity"
    effect_strength: 2  # +2 DEX
  
  ring_of_might:
    char: "="
    color: [255, 150, 0]  # Orange
    ring_effect: "might"
    effect_strength: 4  # +1d4 damage
  
  # ──────────────────────────────────────────────────────────
  # UTILITY RINGS - Special abilities
  # ──────────────────────────────────────────────────────────
  
  ring_of_teleportation:
    char: "="
    color: [255, 255, 100]  # Yellow
    ring_effect: "teleportation"
    effect_strength: 20  # 20% chance on hit
  
  ring_of_invisibility:
    char: "="
    color: [150, 150, 200]  # Faint blue
    ring_effect: "invisibility"
    effect_strength: 5  # 5 turns invisible per level
  
  ring_of_searching:
    char: "="
    color: [255, 215, 0]  # Gold
    ring_effect: "searching"
    effect_strength: 3  # 3 tile radius
  
  ring_of_free_action:
    char: "="
    color: [200, 255, 200]  # Light green
    ring_effect: "free_action"
    effect_strength: 1  # Immune to paralysis/slow
  
  # ──────────────────────────────────────────────────────────
  # MAGIC RINGS - Spell enhancement
  # ──────────────────────────────────────────────────────────
  
  ring_of_wizardry:
    char: "="
    color: [150, 100, 255]  # Deep purple
    ring_effect: "wizardry"
    effect_strength: 1  # +1 to spell effects
  
  ring_of_clarity:
    char: "="
    color: [200, 200, 255]  # Pale blue
    ring_effect: "clarity"
    effect_strength: 1  # Immune to confusion
  
  ring_of_speed:
    char: "="
    color: [255, 255, 255]  # White/bright
    ring_effect: "speed"
    effect_strength: 10  # +10% speed
  
  # ──────────────────────────────────────────────────────────
  # SPECIAL RINGS - Unique effects
  # ──────────────────────────────────────────────────────────
  
  ring_of_constitution:
    char: "="
    color: [100, 255, 200]  # Cyan
    ring_effect: "constitution"
    effect_strength: 2  # +2 CON (+20 max HP)
  
  ring_of_luck:
    char: "="
    color: [255, 215, 180]  # Rose gold
    ring_effect: "luck"
    effect_strength: 5  # +5% crit chance, better loot

# ==============================================================================
# MAP FEATURES - Interactive environmental objects
# ==============================================================================
# Map features are interactive entities on the game map that provide
# discovery moments, loot, information, or access to new areas.
#
# Feature Types:
#   - Chests: Loot containers (can be trapped, locked, or mimics)
#   - Signposts: Readable signs with messages (lore, warnings, hints)
#   - Secret Doors: Hidden passages (75% passive reveal when adjacent)
#   - Vaults: Special treasure rooms with tougher enemies
#
# Chests can be in various states:
#   - closed: Normal chest, ready to open
#   - trapped: Triggers trap on open (damage, status effect, monster spawn)
#   - locked: Requires key to open
#   - mimic: Actually a monster in disguise!
#
# Signpost types:
#   - lore: Backstory about the dungeon
#   - warning: Alerts about nearby dangers
#   - humor: Easter eggs and jokes
#   - hint: Clues about nearby secrets
#   - directional: Navigation help

map_features:
  # ============================================================================
  # CHESTS - Loot containers
  # ============================================================================
  
  chest:
    char: "C"
    color: [139, 69, 19]  # Brown/wooden
    blocks: false
    render_order: "item"
    chest_state: "closed"
    loot_quality: "common"
  
  # Rare/valuable chest variant
  golden_chest:
    char: "C"
    color: [255, 215, 0]  # Gold
    blocks: false
    render_order: "item"
    chest_state: "closed"
    loot_quality: "rare"
  
  # Trapped chest variant
  trapped_chest:
    char: "C"
    color: [150, 75, 25]  # Dark brown
    blocks: false
    render_order: "item"
    chest_state: "trapped"
    trap_type: "damage"  # Or: poison, monster_spawn
    loot_quality: "uncommon"
  
  # Locked chest variant
  locked_chest:
    char: "C"
    color: [150, 150, 180]  # Shiny silver/steel (clearly distinct from grey)
    blocks: false
    render_order: "item"
    chest_state: "locked"
    key_id: "silver_key"  # Requires Silver Key to open
    loot_quality: "rare"
  
  # ============================================================================
  # SIGNPOSTS - Readable messages
  # ============================================================================
  
  signpost:
    char: "|"
    color: [139, 69, 19]  # Brown wood
    blocks: false
    render_order: "item"
    sign_type: "lore"
    # message will be set dynamically or from templates
  
  warning_sign:
    char: "|"
    color: [255, 69, 0]  # Red/orange for warnings
    blocks: false
    render_order: "item"
    sign_type: "warning"
  
  humor_sign:
    char: "|"
    color: [100, 200, 255]  # Cyan for humor
    blocks: false
    render_order: "item"
    sign_type: "humor"
  
  hint_sign:
    char: "|"
    color: [255, 215, 0]  # Gold for hints
    blocks: false
    render_order: "item"
    sign_type: "hint"
  
  # ============================================================================
  # LOCKED DOORS - Vault entrances and special areas
  # ============================================================================
  # Locked doors block passage until unlocked with the matching key.
  # Each door type corresponds to a specific key type and vault theme.
  
  bronze_door:
    char: "+"
    color: [205, 127, 50]  # Bronze
    blocks: true
    render_order: "item"
    door_type: "locked"
    required_key: "bronze_key"
  
  silver_door:
    char: "+"
    color: [192, 192, 192]  # Silver
    blocks: true
    render_order: "item"
    door_type: "locked"
    required_key: "silver_key"
  
  gold_door:
    char: "+"
    color: [255, 215, 0]  # Gold
    blocks: true
    render_order: "item"
    door_type: "locked"
    required_key: "gold_key"
  
  crimson_door:
    char: "+"
    color: [220, 20, 60]  # Crimson
    blocks: true
    render_order: "item"
    door_type: "locked"
    required_key: "dragon_scale"

# Unique Quest Items
# Special items that trigger victory conditions and story events
unique_items:
  # Aurelyn's Ruby Heart - The dragon heart
  # The extracted heart of Aurelyn, Zhyraxion's partner
  # Finding it triggers the final confrontation and victory condition
  ruby_heart:
    char: "*"  # Pulsing heart symbol
    color: [220, 20, 60]  # Crimson red
    render_order: "item"
    blocks: false
    description: "A dragon's heart, crystallized into ruby. It pulses with inner fire, warm to the touch, beating with a rhythm that isn't quite alive but isn't quite dead either. You can feel immense power thrumming through it. This was once part of a living being."
    is_quest_item: true
    triggers_victory: true
    cannot_drop: true  # Cannot be dropped once picked up
  
  # Entity's Portal - Gateway to the final confrontation
  # Appears when player obtains the Ruby Heart
  # Stepping through leads to the Confrontation Chamber
  entity_portal:
    char: "O"  # Portal symbol
    color: [255, 0, 255]  # Bright magenta (otherworldly)
    render_order: "item"
    blocks: false
    description: "A shimmering portal wreathed in temporal distortions. The Entity's voice echoes from within."
    is_portal: true  # Pickupable! (Future: Portal system mechanics, easter eggs, tactical gameplay)

# Unique NPCs
# Special entities that provide story, dialogue, or quests
unique_npcs:
  # The Ghost Guide - Grumpy mentor who warns about the Entity
  # Appears at camps on levels 5, 10, 15, 20 (Phase 3)
  # Personality: Sarcastic, cranky, "Crabby Old Luke" vibes
  ghost_guide:
    char: "@"  # Humanoid symbol (like player)
    color: [150, 220, 255]  # Light cyan (ghostly/ethereal)
    render_order: "actor"
    blocks: false  # Can walk through (it's a ghost!)
    name: "Ghostly Guide"
    
    # Ghost has no combat stats - it's intangible
    # If attacked, give sarcastic response instead of damage
    is_intangible: true
    
    # Dialogue component (Phase 3)
    # Loaded from guide_dialogue.yaml
    has_dialogue: true
    dialogue_source: "guide_dialogue"
    
    # Visual effects
    description: "A translucent figure with weary eyes. The ghost of a failed adventurer."
    flavor_text: "The ghost regards you with a mixture of pity and irritation."
    
    # Behavior
    # Guide doesn't move or attack - just stands in camp waiting
    ai_type: "stationary"  # Doesn't move
    faction: "neutral"  # Won't attack player, can't be attacked meaningfully
    
    # Special properties
    is_npc: true
    is_guide: true  # Flag for special Guide logic
    appears_at_levels: [5, 10, 15, 20]  # Which levels to spawn
    spawn_location: "camp"  # Spawns in camp/safe rooms only
