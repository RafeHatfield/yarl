# Guide Dialogue System
#
# The Guide: A ghostly former adventurer who warns about the Entity
# Personality: Wistful, regretful, wants to save you from their fate
# Respects player agency - warns but doesn't force
#
# Phase 3: Progressive backstory reveals at camp encounters
# Phase 5: Can be expanded with multiple endings integration

# Guide encounters at specific levels (in camp rooms)
encounters:
  # Level 5 - First Warning
  5:
    greeting: "A translucent figure materializes in the firelight..."
    introduction: >
      *'Ah... another one. You hear it too, don't you? The voice in the dark,
      promising power, promising freedom. I heard it once, long ago.'*
    
    dialogue_tree:
      - id: "who_are_you"
        player_option: "Who are you?"
        npc_response: >
          *'I was an adventurer, like you. Came here seeking glory, seeking treasure.
          Found only lies and chains. The Entity... it speaks sweetly, but its words
          are poison.'*
        leads_to: ["what_happened", "leave"]
        
      - id: "what_happened"
        player_option: "What happened to you?"
        npc_response: >
          *'I believed. That was my mistake. It promised me power beyond imagining
          if I would only free it. I reached the bottom, took the cursed thing in my hands...
          and learned the truth too late.'*
        leads_to: ["the_truth", "leave"]
        
      - id: "the_truth"
        player_option: "What truth?"
        npc_response: >
          *'That the Entity cares nothing for mortals. We are tools, nothing more.
          I gave it the amulet [PLACEHOLDER], thinking I'd be rewarded. Instead...'*
          
          The figure fades slightly, as if remembering is painful.
          
          *'...instead it consumed me. My soul is bound here now, warning others.
          Don't make my mistake.'*
        unlocks_knowledge: "guide_first_warning"
        leads_to: ["leave"]
        
      - id: "leave"
        player_option: "I should go."
        npc_response: >
          *'Yes... you have far to descend. But remember: the Entity is NOT your friend.
          Whatever it promises is a lie.'*
        ends_conversation: true
    
    farewell: "The ghostly figure fades into the shadows."
    
  # Level 10 - Entity's True Nature
  10:
    greeting: "The ghost appears again, its form more substantial here in the depths..."
    introduction: >
      *'You're persistent. Good. You'll need that. But persistence alone won't save you
      from what awaits below.'*
    
    dialogue_tree:
      - id: "tell_more"
        player_option: "Tell me more about the Entity."
        npc_response: >
          *'It was once a dragon - magnificent, terrible, ancient beyond measure.
          But it grew too proud, too cruel. The old mages bound it, forced it into
          human form as punishment.'*
        leads_to: ["how_bound", "why_here"]
        
      - id: "how_bound"
        player_option: "How was it bound?"
        npc_response: >
          *'The amulet [PLACEHOLDER] - that cursed thing you'll find at the bottom.
          It's not treasure. It's a prison. The Entity's power, its very essence,
          locked away in a trinket.'*
        leads_to: ["what_if_take", "why_here"]
        
      - id: "what_if_take"
        player_option: "What if I take it?"
        npc_response: >
          *'Then you hold its prison. It will BEG you to free it. Promise you
          anything. It nearly broke me with its pleading... but I was weak.'*
          
          The ghost's voice drops to a whisper.
          
          *'Don't be weak like I was.'*
        unlocks_knowledge: "entity_is_bound_dragon"
        leads_to: ["why_here"]
        
      - id: "why_here"
        player_option: "Why are you still here?"
        npc_response: >
          *'Because I freed it. And it showed its true nature - consumed my soul
          as payment. Now I'm bound to this place, warning others. Perhaps if I
          save enough souls, I can find peace.'*
        leads_to: ["leave"]
        
      - id: "leave"
        player_option: "I understand."
        npc_response: >
          *'Do you? I hope so. The Entity will sound desperate, and it IS desperate.
          But not for the reasons you think. It doesn't want freedom... it wants
          REVENGE.'*
        ends_conversation: true
    
    farewell: "The figure dissipates like morning mist."
    
  # Level 15 - The True Name
  15:
    greeting: "The ghost materializes with urgency, its ethereal form flickering..."
    introduction: >
      *'You're close now. So close to the final choice. I must tell you something
      I learned too late - something that might save you.'*
    
    dialogue_tree:
      - id: "what_is_it"
        player_option: "What do you need to tell me?"
        npc_response: >
          *'The Entity's true name. When dragons are bound, their names are sealed
          away. But I learned it... in my final moments, as it consumed me, I
          saw its true self.'*
        leads_to: ["the_name", "why_important"]
        
      - id: "the_name"
        player_option: "What is its name?"
        npc_response: >
          *'Zhyraxion. That is what it was, before the binding, before the curse.
          Zhyraxion the Corruptor, Zhyraxion the Endless, Zhyraxion who brought
          kingdoms to ruin.'*
          
          The ghost's eyes glow with an otherworldly light.
          
          *'Remember this name. If you choose mercy... if you try to free it...
          speak the true name. It may be the difference between redemption and ruin.'*
        unlocks_knowledge: "entity_true_name_zhyraxion"
        grants_achievement: "learned_true_name"
        leads_to: ["why_important"]
        
      - id: "why_important"
        player_option: "Why does the name matter?"
        npc_response: >
          *'True names have power over dragons. If you destroy the amulet [PLACEHOLDER]
          to free it, AND speak its true name, you might break the curse itself.
          Purify what was corrupted. But without the name...'*
          
          The figure shudders.
          
          *'...without the name, you free a monster.'*
        leads_to: ["what_should_do"]
        
      - id: "what_should_do"
        player_option: "What should I do?"
        npc_response: >
          *'That's not for me to say. Keep the amulet, you stay safe but the Entity
          remains trapped forever. Give it the amulet, you both die. Destroy it
          without the name, you free a corrupted dragon. But destroy it AND speak
          the true name...'*
          
          A sad smile crosses the ghost's face.
          
          *'Maybe, just maybe, you save us both.'*
        leads_to: ["leave"]
        
      - id: "leave"
        player_option: "Thank you. I'll remember."
        npc_response: >
          *'I hope you do. And I hope you're stronger than I was. Zhyraxion...
          don't forget. It's the key to everything.'*
        ends_conversation: true
    
    farewell: "The ghost fades, leaving only a whisper: *'Zhyraxion...'*"
    
  # Level 20 - Final Warning
  20:
    greeting: "The ghost appears one last time, its form barely visible..."
    introduction: >
      *'This is the last time we'll meet. You're nearly there. Nearly at the choice
      that will define everything.'*
    
    dialogue_tree:
      - id: "what_now"
        player_option: "What happens now?"
        npc_response: >
          *'Now you descend the final stretch. The Entity's voice will be loudest
          here - desperate, frantic, promising anything. Don't listen to the promises.
          Listen to the desperation behind them.'*
        leads_to: ["your_advice", "will_see_again"]
        
      - id: "your_advice"
        player_option: "What's your advice?"
        npc_response: >
          *'Trust yourself. You've come this far. You've heard both sides - the
          Entity's lies and my warnings. The choice is yours alone.'*
          
          The ghost places an ethereal hand over its chest.
          
          *'If you keep the amulet, the Entity suffers but you live. If you give
          it the amulet, you both die. If you destroy it with the true name...
          maybe you both find peace.'*
        leads_to: ["will_see_again"]
        
      - id: "will_see_again"
        player_option: "Will I see you again?"
        npc_response: >
          *'If you free Zhyraxion properly - with the name, with mercy - perhaps
          my curse will lift too. We're both prisoners of that moment when I made
          the wrong choice.'*
          
          The ghost is barely visible now.
          
          *'Make the right choice. Be better than I was.'*
        unlocks_knowledge: "guide_final_advice"
        leads_to: ["farewell"]
        
      - id: "farewell"
        player_option: "Goodbye, friend."
        npc_response: >
          *'Goodbye, brave soul. May you find the strength I lacked. Remember:
          Zhyraxion. The true name is everything.'*
        ends_conversation: true
    
    farewell: "The ghost vanishes completely, leaving only cold air and memories."

# Configuration
config:
  # Should Guide dialogue be tracked in save?
  track_in_save: true
  
  # Knowledge flags that can be unlocked
  knowledge_flags:
    - guide_first_warning
    - entity_is_bound_dragon
    - entity_true_name_zhyraxion
    - guide_final_advice
  
  # Achievement for learning true name
  achievements:
    - learned_true_name
  
  # Should Guide encounters be mandatory?
  # FALSE = Player can walk past Guide if they want
  mandatory_encounters: false
  
  # Visual representation
  guide_char: "@"
  guide_color: "light_cyan"
  guide_name: "Ghostly Guide"

