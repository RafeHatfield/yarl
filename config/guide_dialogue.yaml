# Guide Dialogue System
#
# The Guide: A ghostly former adventurer who warns about the Entity
# Backstory: Failed retrieval agent - Entity sent them to get the amulet,
#   but they failed and got their soul consumed as punishment. Now stuck
#   as eternal warner, watching new fools make the same journey.
# Personality: Grumpy, sarcastic, "cranky mentor" vibes
#   - Tired of watching fools make the same mistakes
#   - Not above slapping your hand (metaphorically) 
#   - Somber and serious, but with biting wit
#   - Bitter about their own failure
#   - Respects player agency but thinks they're probably an idiot
#
# Phase 3: Progressive backstory reveals at camp encounters
# Phase 5: Can be expanded with multiple endings integration

# Guide encounters at specific levels (in camp rooms)
encounters:
  # Level 5 - First Warning
  5:
    greeting: "A translucent figure materializes in the firelight..."
    introduction: >
      *'Oh great. Another idiot following the voice. You DO hear it, don't you?
      The whispering, the promises? Of course you do. They all do.'*
    
    dialogue_tree:
      - id: "who_are_you"
        player_option: "Who are you?"
        npc_response: >
          *'I'm the ghost of someone who was as stupid as you're about to be.
          Came down here seeking glory. Found a lying snake instead. The Entity
          talks real pretty, but here's a tip: it's full of it.'*
        leads_to: ["what_happened", "leave"]
        
      - id: "what_happened"
        player_option: "What happened to you?"
        npc_response: >
          *'What do you THINK happened? I listened to the voice. Believed its
          sob story. "Free me and I'll reward you!" Sure, buddy. The reward
          was getting my soul ripped out and stuck here warning fools like you.'*
          
          The ghost crosses its arms irritably.
          
          *'Spoiler alert: it doesn't end well.'*
        leads_to: ["the_truth", "leave"]
        
      - id: "the_truth"
        player_option: "What's the truth?"
        npc_response: >
          *'The truth? The Entity doesn't give a damn about you. You're a means
          to an end. It sent ME down here first - promised me power if I brought
          it that cursed amulet [PLACEHOLDER]. Sounded easy, right?'*
          
          The figure snorts.
          
          *'I failed. Couldn't get past the guardians. And when I came back empty-
          handed? It ripped my soul out and threw me away like garbage. Now I'm
          stuck here. So yeah, go be its errand boy if you want. I'm sure YOU'LL
          succeed where I failed. They all think they're special.'*
        unlocks_knowledge: "guide_first_warning"
        leads_to: ["leave"]
        
      - id: "leave"
        player_option: "I should go."
        npc_response: >
          *'Yeah, run along. Go chase your destiny or whatever. Just remember:
          that voice in your head is a LIAR. But hey, what do I know? I'm just
          a dead guy.'*
        ends_conversation: true
    
    farewell: "The ghost waves dismissively and fades."
    
  # Level 10 - Entity's True Nature
  10:
    greeting: "The ghost appears again, looking annoyed..."
    introduction: >
      *'Still here? Huh. Maybe you're not as dumb as you look. Or maybe you're
      dumber and just lucky. Either way, we need to talk about what you're
      walking into.'*
    
    dialogue_tree:
      - id: "tell_more"
        player_option: "Tell me about the Entity."
        npc_response: >
          *'Fine. History lesson time. The Entity? It's a DRAGON. Was a dragon.
          Zhyraxion - fancy name for a fancy monster. Ancient, powerful, and
          mean as hell. Got itself cursed and shoved into a human body as punishment.'*
          
          The ghost smirks.
          
          *'Turns out even dragons can screw up bad enough to get grounded.'*
        leads_to: ["how_bound", "why_here"]
        
      - id: "how_bound"
        player_option: "How was it bound?"
        npc_response: >
          *'That shiny bauble you're going to find at the bottom? It's not loot,
          genius. It's a CAGE. The amulet [PLACEHOLDER] - it's got the dragon's
          whole essence locked up in it. Think magical solitary confinement.'*
        leads_to: ["what_if_take", "why_here"]
        
      - id: "what_if_take"
        player_option: "What happens if I take it?"
        npc_response: >
          *'Oh, THEN the fun starts. It'll beg. It'll plead. "Please free me,
          kind mortal!" What a load of garbage. I fell for it because I was
          an idiot. The question is: are YOU an idiot?'*
          
          The ghost leans in.
          
          *'Trick question. You're here, aren't you?'*
        unlocks_knowledge: "entity_is_bound_dragon"
        leads_to: ["why_here"]
        
      - id: "why_here"
        player_option: "Why are you stuck here?"
        npc_response: >
          *'Because I FAILED. The dragon sent me to retrieve the amulet - its prison,
          its power source, the thing keeping it trapped. I couldn't do it. Wasn't
          strong enough. So it ate my soul and left me here as a warning.'*
          
          The ghost's voice turns bitter.
          
          *'Here's the kicker: it's been sending adventurers for CENTURIES. You're
          just the latest. Most die. Some succeed. None live to enjoy it.'*
        leads_to: ["leave"]
        
      - id: "leave"
        player_option: "Right. Thanks."
        npc_response: >
          *'Don't thank me yet. You haven't proven you're smarter than I was.
          Just remember: desperate prisoners will say ANYTHING. And this one's
          had centuries to practice lying.'*
        ends_conversation: true
    
    farewell: "The ghost rolls its eyes and fades away."
    
  # Level 15 - The True Name
  15:
    greeting: "The ghost appears, more serious now, less sarcastic..."
    introduction: >
      *'Alright, listen up. You've made it this far without dying OR listening
      to the dragon, which puts you ahead of most idiots who come through here.
      So I'm going to tell you something important. Try not to screw it up.'*
    
    dialogue_tree:
      - id: "what_is_it"
        player_option: "What do you need to tell me?"
        npc_response: >
          *'The dragon's TRUE name. Not "the Entity" - that's what it calls itself
          now because it's embarrassed. When I was dying, soul getting ripped out,
          I saw what it really was. Got the name burned into my brain.'*
        leads_to: ["the_name", "why_important"]
        
      - id: "the_name"
        player_option: "What's the name?"
        npc_response: >
          *'Zhyraxion. Yeah, I know, sounds like someone tried too hard. But that's
          what dragons are like. Zhyraxion the Corruptor, Zhyraxion the Endless,
          blah blah blah. Lots of fancy titles for "giant angry lizard."'*
          
          The ghost's tone gets serious.
          
          *'But write this down, because it matters: ZHYRAXION. Say it when you
          destroy the prison, or you're just freeing a monster. Say it, and maybe...
          maybe you fix what's broken.'*
        unlocks_knowledge: "entity_true_name_zhyraxion"
        grants_achievement: "learned_true_name"
        leads_to: ["why_important"]
        
      - id: "why_important"
        player_option: "Why does the name matter?"
        npc_response: >
          *'Because true names have POWER. Destroy the amulet [PLACEHOLDER] without
          the name? You release corrupted dragon that eats everything. Destroy it
          WITH the name? You might actually break the curse. Purify the corruption.
          Turn the monster back into... whatever it was before it went bad.'*
          
          The ghost snorts.
          
          *'No pressure or anything.'*
        leads_to: ["what_should_do"]
        
      - id: "what_should_do"
        player_option: "So what should I do?"
        npc_response: >
          *'How should I know? You think I got this right? Look where I ended up!
          But fine, here's your options: Keep the amulet, live but the dragon stays
          trapped. Give it the amulet, you both die. Destroy it without the name,
          hello evil dragon apocalypse. Destroy it WITH the name...'*
          
          The ghost almost smiles.
          
          *'...that one MIGHT work. Might save both of us. Might. Don't quote me.'*
        leads_to: ["leave"]
        
      - id: "leave"
        player_option: "I'll remember the name."
        npc_response: >
          *'You better. Zhyraxion. It's your only shot at the "good" ending, whatever
          that means. Just... try to be smarter than I was. Which is a pretty low bar.'*
        ends_conversation: true
    
    farewell: "The ghost fades, muttering: *'Zhyraxion... don't forget...'*"
    
  # Level 20 - Final Warning
  20:
    greeting: "The ghost appears, barely holding itself together..."
    introduction: >
      *'So... you made it. Honestly didn't think you would. Most don't. But here
      you are, almost at the bottom. Almost at the moment where everything goes
      sideways. This is the last time I can help you, so... listen good.'*
    
    dialogue_tree:
      - id: "what_now"
        player_option: "What should I expect?"
        npc_response: >
          *'The voice is going to get LOUD. Desperate. Zhyraxion's been alone for
          centuries, and it REALLY wants out. It'll promise you the world. Power,
          riches, eternal glory, whatever you want to hear. All lies.'*
          
          The ghost's form flickers.
          
          *'But... and here's the thing... the desperation is real. It IS suffering.
          Doesn't make it any less dangerous, but... it's not totally fake, either.'*
        leads_to: ["your_advice", "will_see_again"]
        
      - id: "your_advice"
        player_option: "So what do I do?"
        npc_response: >
          *'Hell if I know. I screwed it up, remember? But you've got something I
          didn't: you know ALL the options. Keep the amulet? Safe, but the dragon
          stays trapped forever. Give it away? You both die. Destroy it without
          the name? Free evil dragon. Destroy it WITH the name?'*
          
          The ghost actually looks hopeful for once.
          
          *'Maybe that works. Maybe you save everyone. Maybe I finally get some peace.
          Maybe pigs fly. But it's your best shot.'*
        leads_to: ["will_see_again"]
        
      - id: "will_see_again"
        player_option: "Will this free you too?"
        npc_response: >
          *'Who knows? If you do the name thing, if you actually redeem Zhyraxion...
          maybe my curse lifts. Maybe I finally get to move on instead of being
          stuck here playing tour guide to idiots like you.'*
          
          The form is fading fast now.
          
          *'Look, I've been calling you an idiot this whole time, but... you made
          it here. You listened. That's more than I did. So maybe you're NOT an
          idiot. Maybe you're exactly what this place needs.'*
        unlocks_knowledge: "guide_final_advice"
        leads_to: ["farewell"]
        
      - id: "farewell"
        player_option: "Thank you. For everything."
        npc_response: >
          *'Yeah, yeah. Don't get sentimental on me now. Just... remember the name.
          Zhyraxion. And whatever you choose down there - make it YOUR choice.
          Not the dragon's, not mine. Yours.'*
          
          The ghost manages a wry smile.
          
          *'Now get out of here before I start actually caring what happens to you.'*
        ends_conversation: true
    
    farewell: "The ghost fades completely. For just a moment, you could swear you heard: *'...good luck, kid.'*"

# Configuration
config:
  # Should Guide dialogue be tracked in save?
  track_in_save: true
  
  # Knowledge flags that can be unlocked
  knowledge_flags:
    - guide_first_warning
    - entity_is_bound_dragon
    - entity_true_name_zhyraxion
    - guide_final_advice
  
  # Achievement for learning true name
  achievements:
    - learned_true_name
  
  # Should Guide encounters be mandatory?
  # FALSE = Player can walk past Guide if they want
  mandatory_encounters: false
  
  # Visual representation
  guide_char: "@"
  guide_color: "light_cyan"
  guide_name: "Ghostly Guide"

