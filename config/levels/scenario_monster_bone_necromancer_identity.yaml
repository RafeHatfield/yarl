# Scenario: Bone Necromancer Identity Kit (Phase 19)
# Purpose: Regression anchor for Phase 19 bone necromancer identity mechanics:
#   - Bone Raise: Cooldown-based bone pile resurrection (4-turn cooldown)
#   - Bone Seeking: Moves toward bone piles when out of range
#   - Summons: Creates weak bone thralls from bone piles
#   - Safety Constraint: Never approaches within 2 tiles of player
#   - Hang-back AI: Bone necromancer prefers distance 4-7 from player
#
# This scenario is deterministic and suitable for ongoing regression validation.

metadata:
  scenario_id: monster_bone_necromancer_identity
  family: ability_tests
  depth: 4

scenario_id: monster_bone_necromancer_identity
name: "Bone Necromancer Identity Kit (Phase 19)"
description: "Validate Phase 19 bone necromancer mechanics: bone raise, bone seeking, safety radius."

depth: 4

defaults:
  turn_limit: 250
  player_bot: "tactical_fighter"
  allow_player_death: true
  runs: 30

expected:
  min_player_kills: 5  # Bone necromancer + enemies per run Ã— 30 runs
  min_player_deaths: 5  # Should be a real threat (not a pushover)
  max_player_deaths: 20  # But not overwhelming
  # BALANCE PHILOSOPHY:
  # - 5-20 deaths validates bone necromancer is BOTH threatening AND beatable
  # - < 5 deaths = too easy (bone necromancer ineffective, needs buff)
  # - > 20 deaths = too hard (overwhelming, needs nerf)
  # - Current tuning targets ~10 deaths (33% death rate = moderate threat)

rooms:
  - id: "bone_crypt"
    type: "arena"
    width: 21
    height: 15
    description: "Crypt with skeletons that leave bone piles for necromancer"
    walls: "enclosed"

monsters:
  # Bone Necromancer - controller who raises bone piles into bone thralls
  - type: "bone_necromancer"
    count: 1
    position: [17, 7]
    facing: "west"
    state: "aware"
  
  # Skeletons - will become bone piles on death
  # Positioned at various distances to test bone seeking
  - type: "skeleton"
    count: 1
    position: [13, 5]
    facing: "west"
    state: "aware"
  - type: "skeleton"
    count: 1
    position: [13, 9]
    facing: "west"
    state: "aware"
  - type: "skeleton"
    count: 1
    position: [11, 7]
    facing: "west"
    state: "aware"
  - type: "skeleton"
    count: 1
    position: [9, 6]
    facing: "west"
    state: "aware"
  - type: "skeleton"
    count: 1
    position: [9, 8]
    facing: "west"
    state: "aware"

items:
  # Ranged weapon: helps player create distant bone piles
  - type: "shortbow"
    count: 1
    position: [3, 7]
  
  # Thrown weapons: alternative ranged option
  - type: "dagger"
    count: 5
    position: [3, 8]
  
  # Melee weapon: for close combat
  - type: "longsword"
    count: 1
    position: [3, 5]
  
  # Healing potions: allow extended combat to observe multiple raises
  - type: "healing_potion"
    count: 5
    position: [2, 4]
  - type: "healing_potion"
    count: 5
    position: [2, 10]
  - type: "healing_potion"
    count: 3
    position: [3, 6]

player:
  position: [2, 7]
  facing: "east"
  inventory: []
  equipment:
    weapon: "shortsword"  # Mid-tier weapon (better than dagger)
    armor: "leather_armor"  # Basic armor for survivability

# Scenario design notes (Phase 19 - Bone Necromancer):
# - Player starts with shortsword + leather armor (moderate survivability)
# - Shortbow + arrows available on ground (ranged combat, can create distant bone piles)
# - Longsword available on ground (stronger melee weapon)
# - 1 Bone Necromancer + 5 skeletons (balanced for ~5-20 deaths / 30 runs)
# - Bone necromancer starts at distance 17, skeletons at various distances (9-13)
# - Enemy positioning creates bone piles at different locations:
#   - Some bone piles will be in raise range immediately
#   - Some bone piles will require necromancer to seek them
# - Bone necromancer behavior:
#   - Raise bone piles on 4-turn cooldown when in range (5 tiles)
#   - Seek bone piles when out of range (respecting 2-tile safety radius from player)
#   - Hang back to distance 4-7 from player
#   - Never approach within 2 tiles of player (even when seeking bone piles)
# - Raised bone thralls are friendly to necromancer (faction: cultist)
# - Bone thralls are very weak (12 HP, 2-3 damage) but numerous
# - Arena layout: 21x15 with room for bone piles to spread out
# - Healing potions: 13 total (generous supply for extended combat)
#
# Expected metrics (30 runs):
# - bone_raise_attempts: >= 20 (necromancer should attempt raises frequently)
# - bone_raise_successes: >= 20 (most raises should succeed)
# - bone_piles_consumed: >= 20 (bone piles consumed during raises)
# - bone_thralls_spawned: >= 20 (bone thralls created)
# - bone_seek_moves: >= 10 (demonstrates bone-seeking movement)
#
# Validation:
# - Bone necromancer raises bone piles on cooldown
# - Bone necromancer moves toward distant bone piles while respecting safety radius
# - Raised bone thralls are friendly to necromancer (don't attack it)
# - Bone piles are consumed when raised (removed from map)
# - Hang-back AI keeps necromancer at safe distance
# - Cooldown prevents spam (action_cooldown=4 turns)




