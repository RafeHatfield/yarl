# Scenario: Orc Chieftain Identity Kit (Phase 19)
# Purpose: Regression anchor for Phase 19 orc chieftain identity mechanics:
#   - Rallying Cry: +1 to-hit AND +1 damage for nearby orc allies (ONE-TIME, very impactful)
#   - Cleanses fear/morale debuffs from rallied orcs
#   - Issues "call to attack" directive: rallied orcs prioritize chieftain's target
#   - Rally persists UNTIL THE CHIEFTAIN IS DAMAGED (first time), then ends immediately
#   - Sonic Bellow: -1 to-hit for player when chieftain drops below 50% HP (ONE-TIME)
#   - Hang-back AI: Chieftain prefers to avoid leading charge when allies can engage
#
# This scenario is deterministic and suitable for ongoing regression validation.

metadata:
  scenario_id: monster_orc_chieftain_identity
  family: ability_tests
  depth: 3

scenario_id: monster_orc_chieftain_identity
name: "Orc Chieftain Identity Kit (Phase 19)"
description: "Validate Phase 19 orc chieftain mechanics: rally cry, sonic bellow, hang-back AI."

depth: 3

defaults:
  turn_limit: 200
  player_bot: "tactical_fighter"
  allow_player_death: true
  runs: 30

expected:
  min_player_kills: 4  # 1 chieftain + 3 orcs per run Ã— 30 runs = 120 minimum
  max_player_deaths: 12  # Chieftain is a tough fight with rally active

rooms:
  - id: "chieftain_arena"
    type: "arena"
    width: 17
    height: 13
    description: "Arena with space for chieftain to hang back and rally"
    walls: "enclosed"

monsters:
  # Orc Chieftain - leader who hangs back
  - type: "orc_chieftain"
    count: 1
    position: [13, 6]
    facing: "west"
    state: "aware"
  
  # Group of 3 basic orcs - will be rallied by chieftain
  # Positioned to allow chieftain to hang back
  - type: "orc"
    count: 1
    position: [10, 5]
    facing: "west"
    state: "aware"
  - type: "orc"
    count: 1
    position: [10, 6]
    facing: "west"
    state: "aware"
  - type: "orc"
    count: 1
    position: [10, 7]
    facing: "west"
    state: "aware"

items:
  # Ranged weapon: allows player to "tag" chieftain to break rally
  - type: "shortbow"
    count: 1
    position: [3, 4]
  
  # Melee weapon: for close combat
  - type: "longsword"
    count: 1
    position: [3, 8]
  
  # Healing potions: allow extended combat to observe all mechanics
  - type: "healing_potion"
    count: 4
    position: [2, 3]
  - type: "healing_potion"
    count: 3
    position: [2, 9]

player:
  position: [2, 6]
  facing: "east"
  inventory: []
  equipment:
    weapon: "dagger"  # Start with basic weapon
    armor: null  # No armor - allows observation of orc damage output

# Scenario design notes (Phase 19 - Orc Chieftain):
# - Player starts with dagger (weak weapon)
# - Shortbow available on ground (ranged, can tag chieftain from distance)
# - Longsword available on ground (stronger melee weapon)
# - 1 Orc Chieftain + 3 basic orcs
# - Chieftain starts at distance 13, orcs at distance 10
# - Chieftain will hang back while orcs engage (distance 2-4 from player)
# - When chieftain has line of sight and 2+ orc allies within radius 5:
#   - Rally triggers (ONE-TIME)
#   - All 3 orcs get: +1 to-hit, +1 damage, directive to attack player
#   - Rally persists until chieftain is damaged
# - Player can break rally by:
#   - Using shortbow to tag chieftain from distance
#   - Flanking/funneling to reach chieftain
# - When chieftain drops below 50% HP (first time):
#   - Sonic Bellow triggers (ONE-TIME)
#   - Player gets -1 to-hit for 2 turns
# - Hang-back demonstration:
#   - Chieftain stays at distance 2-4 while orcs engage
#   - Only approaches when orcs are dead or player flanks
# - Arena layout: 17x13 with room to maneuver
# - Healing potions: allow extended combat to observe mechanics





