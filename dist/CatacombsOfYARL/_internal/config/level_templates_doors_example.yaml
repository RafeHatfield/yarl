# Door Rules Configuration Example
# ================================
# This file demonstrates how to configure door_rules for dungeon level generation.
# 
# Door rules can be specified at two scopes:
# 1. Level scope: Applies to all corridor connections on that level
# 2. Special room scope: Applies only to connections within/from that special room (overrides level rules)

version: "1.0"

level_overrides:
  # Example Level 1: Basic doors with no locks or secrets
  1:
    guaranteed_spawns:
      mode: additional
      monsters: []
      items: []
      equipment: []
    
    door_rules:
      spawn_ratio: 0.5  # 50% of corridors get doors
      styles:
        - type: wooden_door
          weight: 1  # 100% wooden (only one type specified)

  # Example Level 5: Locked doors with iron key requirement
  5:
    guaranteed_spawns:
      mode: additional
      monsters: []
      items: []
      equipment: []
    
    door_rules:
      spawn_ratio: 0.75  # 75% of corridors get doors
      styles:
        - type: wooden_door
          weight: 70
        - type: iron_door
          weight: 30
      locked:
        chance: 0.5  # 50% of placed doors are locked
        key_tag: iron_key  # Requires iron_key to unlock

  # Example Level 10: Secret doors
  10:
    guaranteed_spawns:
      mode: additional
      monsters: []
      items: []
      equipment: []
    
    door_rules:
      spawn_ratio: 0.6  # 60% of corridors get doors
      styles:
        - type: wooden_door
          weight: 1
      secret:
        chance: 0.4  # 40% of doors are secret (hidden as walls)
        search_dc: 12  # DC 12 to discover via search

  # Example Level 15: Complex setup with locked AND secret doors
  15:
    guaranteed_spawns:
      mode: additional
      monsters: []
      items: []
      equipment: []
    
    door_rules:
      spawn_ratio: 1.0  # ALL corridors get doors
      styles:
        - type: wooden_door
          weight: 60
        - type: iron_door
          weight: 30
        - type: stone_door
          weight: 10
      locked:
        chance: 0.3  # 30% of doors are locked
        key_tag: iron_key
      secret:
        chance: 0.2  # 20% of doors are secret
        search_dc: 14

  # Example: Special room with custom door_rules
  20:
    guaranteed_spawns:
      mode: additional
      monsters: []
      items: []
      equipment: []
    
    special_rooms:
      - type: treasure_vault
        count: 1
        placement: largest
        guaranteed_spawns:
          monsters: []
          items: []
          equipment: []
        # This special room has different door rules than the level
        door_rules:
          spawn_ratio: 1.0  # ALL connections to vault have doors
          styles:
            - type: iron_door
              weight: 1  # All iron doors for vault security
          locked:
            chance: 1.0  # ALL doors to vault are locked!
            key_tag: iron_key
          secret:
            chance: 0.0  # No secret doors (security through locks)

# Acceptance Criteria Verification
# ==================================
# ✅ spawn_ratio=1.0: All connections get doors
# ✅ locked.chance=1.0: All doors locked; key unlocks
# ✅ secret.chance=1.0: All doors secret; visible after discovery
# ✅ Corridors stay connected: Pathfinding respects door states but units can navigate
# ✅ Unlocked doors don't stop auto-explore: Only locked/secret doors block passage

